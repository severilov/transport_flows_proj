\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{graphicx}


\title{Транспортная теория}
% \author{Ревар Владимир}
\date{December 2021}

\begin{document}

\maketitle

\section{Введение}
\subsection{Применение в реальной жизни}
Транспортные системы городов и их ареалы являются одним из важных
факторов, который влияет на социально-экономическое развитие страны.
Совершенствование транспортной сети повышает качество жизни горожан,
увеличивает рост занятости, укрепляет бюджет города, развивает бизнес и
привлекает инвестиции. \\
Дороги являются "каркасом" страны (города), с помощью которого
соединяются между собой все части страны (города). Поэтому в
идеальной модели рыночной экономики улично-дорожные сети, в частности
и городские, должны обеспечивать высокую мобильность людей и
беспрепятственную перевозку товаров, так как состояние транспортной сети
напрямую влияет на состояние экономики в целом.

Для определения потоков и загрузки элементов сети сегодня существует
много математических моделей. Но основной проблемой в большинстве
данных моделей является необходимость информации о передвигающихся
по городу индивидуумах. Эта информация представляется в виде матрицы
корреспонденций. \\

\textbf{Матрица корреспонденций} - информация о том, откуда, сколько и куда людей направляются в единицу времени.

Если матрица корреспонденций построена, то на её основе можно:
\begin{itemize}
    \item составить наиболее точное расписание движения общественного
транспорта
    \item определить загрузки элементов улично-дорожной сети
    \item определить главные пассажирообразующие пункты
    \item оценить количество перевозимых пассажиров по типам пассажиров, по
видам транспорта, маршрутам и направлениям
    \item оценить интенсивность пассажиропотоков между различными
пунктами
\end{itemize}

\subsection{Математические понятия}

\textbf{Равновесный принцип Нэша–Вардропа}. Для объяснения ниже будет приведен пример
Рассмотри следующую транспортную систему:

\includegraphics[scale=0.5]{traffic_jam_3_600.jpg}

Из 1 в 4 в единицу времени выезжает 6 автомобилей.\\

Буквой $y$ обозначается количество автомобилей, проезжающих по данному ребру в единицу времени (поток), формулы над ребрами — веса ребер (время проезда ребра в минутах в зависимости от величины потока автомобилей по ребру y).\\

$f_e$ - поток по ребру $e$, где $e \in E = {(12), (24), (13), (34)}$ - множество всех ребер.

Обозначим за $y_{124}, y_{134}$ - потоки на путях $124$ и $134$ соответсвенно.
Аналогично ребрам, вводится множество путей $P = {(124), (134)}$.

$y_p$ - поток по пути $p \in P$.
В данном примере $$y_{124} = f_{12} = f_{24}, y_{134} = f_{13} = f_{34}$$\\

В лекциях присутствует следующее понятие:
$d_{14}$ - \textbf{корреспонденция} - сколько людей в единицу времени хочет перемещаться из $1$ в $4$.

$y_{124} + y_{134} = d = 6$ \\
Итого, можем записать следующее равенство: $$f = \Theta x$$
Потоки по ребрам связаны с потоками по путям.

Условие равновесия: все используемые пути должны иметь одинаковую «длину». Всего путей, ведущих из 1 в 4 три: 1–3–4, 1–3–2–4, 1–2–4.\\

Легко проверить, что если эти 6 автомобилей в одинаковых пропорциях распределятся по всем этим путям (по 2 автомобиля в единицу времени на каждый путь), то время прохождения каждого пути («длина» пути) будет равна 92 минутам (10 · (2 + 2) + (50 + 2) = 10 · (2 + 2) + (10 + 2) + 10 · (2 + 2) = (50 + 2) + 10 · (2 + 2)). Это и будет единственным равновесием (Нэша—Вардропа) в транспортной сети. То есть от такой конфигурации никому из водителей не выгодно отклоняться при условии, что остальные водители не меняют свой выбор.\\

\textbf{Транспортная система}
В работе рассматривается замкнутая транспортная система, описываемая графом $G=<V,E>$, где $V$- множество вершин ($|V|=n$), а $E$ - множество ребер ($|E|=m$)

Обозначим через $\tau_e(f_e)$ - функцию затрат (например, временных) на проезд по ребру $e$, если поток автомобилей на этом участке $f_e$.

$\tau_e(f_e) = \overline t_e \cdot (1+ k(\frac{f_e}{\overline f_e}))^{\frac{1}{\mu}}$, где
\begin{itemize}
    \item $\overline t_e$ - время проезда ребра $e$ по свободной дороге
    \item $\overline f_e$ - максимальная пропускная способность ребра [авт/час]
    \item $k$ - какой-то небольшой коэффициент
    \item $\frac{1}{\mu} = 4$ (обычно берут $4$) - показатель степени
\end{itemize}
Вообще, данная функция относится к классу функций $BPR$.
Также допускается $\mu -> 0+$ - моедль стабильной динамики. \\

Введем $t_e$ - временные затраты на прохождение ребра $e$. $t_e = \tau_e(f_e)$. По затратам $t = \{t_e\}_{e \in E}$ можно определить затраты на перемещение из источника $i$ в сток $j$ по кратчайшему пути:
$$T_{ij} = \min_{p \in P_{ij}} \sum_{e \in E} \delta_{ep}t_e$$, где:
\begin{itemize}
    \item $p$ - путь (без самопересечений, циклов) на графе (набор ребер)
    \item $P_{ij}$ - множество всевозможный путей на графе, стартующих в $i$ и заканчивающих в $j$
    \item $\delta_{ij}$ - дельта функция, показывающая, принадлежит ли ребро $e$ пути $p$
    \item \textbf{Корреспонденция} .Часть вершин $O \subset V (origin)$ являются источниками корреспонденций, а часть стоками корреспонденций $D \subset V (destination)$. В примере выше, мы рассмотрели корреспонденцию, но в общем случае, корреспонденций может быть несколько, обозначаются они следующим образом $d_{ij} = (i,j) \in (OD) $. Если говорить более точно, то вводится множество пар (источник, сток) корреспонденций $OD \subset V * V$. Не ограничивая общности, будем далее считать, что $\sum_{(i,j)\in(OD)} d_{(i,j)} = 1$. В общем случае корреспонденции – не известны! Однако известны (заданы) характеристики источников и стоков корреспонденций. То есть известны величины $\{l_i\}_{i \in O}, \{w_j\}_{j \in D}$
    $$\sum_{j: (i,j) \in (OD)} d_{ij} = l_i,  \sum_{i: (i,j) \in (OD)} d_{ij} = w_j \;\;\;\; (2)$$. 
    
    Кроме того "сколько вышло, столько и пришло" $$\sum_{i \in O} l_i = \sum_{j \ in D} w_j = 1$$. 
    
    Условие $(2)$ для краткости будем записывать $d \in (l,w)$
    
    Кроме этого, в примере у нас присутствовала матрица $\Theta$. Эта матрица имеет следующий вид: $\Theta = ||\delta_{ep}||_{e\in E, p \in P}$
\end{itemize} \\

\subsection{Полезные уравнения:}
$$1. f_e = \sum_{p \in P} \delta_{p} x_p$$ - поток на ребре $e$ равен сумме потоков по тем путям, в которые входит это ребро.
$$2. \sum_{p \in P_w} x_p = d_w, w \in W$$ \\

\textbf{Затраты на пути $p$:} \\
$T_p = \sum_{e \in E} \delta_{ep} \tau_e(f_e(x))$ - суммируем по ребрам, которые входят в данный путь.

Что означает, что $x*$ - равновесие?

$\forall w \in W, \forall p \in P_w$: $$X_p^* \cdot (T_p(x^*) - \min_{q \in P_w}T_q(x^*))=0  \;\;\;\; (1)$$  \\
$(1)$ - условие комплиментарности. Также можно считать переформулировкой понятия равновесия по Нэшу. \\
$p \in P_w$ - пути, отвечающие корреспонденции $w$

\section{Энтропийная модель расчета матрицы корреспонденций}
Под энтропийной моделью расчета матрицы корреспонденций $d(T)$ понимается определенный способ вычисления набора корреспонденций ${d_{ij}}_{(i,j)\in W}$ по известной матрице
затрат $\{T_{ij}\}_{(i,j) \in W}$. Этот способ заключается в решении задачи энтропийно-линейного программирования, которую можно понимать, как энтропийно-регуляризованную транспортную задачу:
$$\min_{d \in (l,w); d \ge 0} \sum_{(i,j) \in OD} d_{ij}T_{ij} + \gamma \sum_{(i,j) \in OD} d_{ij}lnd_{ij} \;\;\;\; (3)$$,
где параметр $\gamma > 0$ считается известным.

\section{Модели равновесного распределения транспортных потоков по путям:}
Матрица корреспонденций ${d_{ij}}_{(i,j)}\in OD$ порождает (вообще говоря, неоднозначно) некий вектор распределения потоков по путям x. Неоднозначность заключается в том, что балансовые ограничения, которые возникают на $$x \in X(d): x \ge 0 : \forall(i, j) \in OD -> \sum_{p \in P_{ij}} x_p = d_{ij}$$
как правило, не определяют вектор $x$ однозначно. Вектор $x$, в свою очередь, пораждает вектор потоков на ребрах, $f = \Theta x$, который, в свою очередь, порождает вектор (временных) затрат на ребрах $t(f) = {\tau_e(f_e)}_{e \in E}$. На основе последнего вектора уже можно рассчитать матрицу затрат на кратчайших путях $T(t) = \{T_{ij}(t)_{(i,j)\in OD}\}$. Собственно, модель равновесного распределения потоков это формализация принципа Нэша–Вардропа о том, что в равновесии каждый водитель выбирает для себя кратчайший путь. Другими словами, если для заданной корреспонденции $(i, j) \in OD$ известно, что (условие комплиментарности)
$$x_{p^{'}} > 0, p^{'} \in P_{ij} -> T_{ij}(t) = \min_{p \in P_{ij}} \sum_{e\in E}\delta_{ep}t_e = \sum_{e \in E} \delta_{ep^{'}}t_e $$
Решение задачи дает модель вычисления вектора потока на ребрах при заданной матрице корреспонденций $f(d)$
\end{document}
